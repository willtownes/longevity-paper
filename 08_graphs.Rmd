---
title: "Make Graphs"
author: "Will Townes"
date: "10/11/2018"
output: html_document
---

```{r}
library(dplyr)
source("./carets.R")

#load all ROC results
bp<-"./results/auto"
species<-c("worm","yeast")
fts<-c("go","archs4","gxp","go_archs4","go_gxp")
atlas<-expand.grid(features=fts,species=species,cv_folds=1:5,stringsAsFactors=FALSE)
load_data<-function(sp,ft,fld){
  pth<-file.path(bp,sp,ft,paste0("roc",fld,".txt"))
  d<-read.table(pth,header=TRUE)
  d$species<-sp
  d$features<-ft
  d$cv_fold<-fld
  d
}
pd<-do.call(rbind,mapply(load_data,atlas$species,atlas$features,atlas$cv_folds,SIMPLIFY=FALSE))
rownames(pd)<-NULL
auc<-pd %>% group_by(species,features,alg,fold,cv_fold) %>% summarize(auc=roc2auc(fpr,tpr))
ggplot(subset(auc,fold=="test"),aes(x=alg,y=auc,col=features))+geom_boxplot()+facet_wrap(~species)+theme_bw()
ggplot(subset(auc,fold=="test"),aes(x=features,y=auc,col=alg))+geom_boxplot()+facet_wrap(~species)+theme_bw()
```